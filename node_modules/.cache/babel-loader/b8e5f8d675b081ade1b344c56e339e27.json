{"ast":null,"code":"var _jsxFileName = \"/home/hp/Desktop/todo-app-crud/todo-fe/src/components/AddTodo/AddTodo.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { FaPlus, FaPen, FaTrashAlt, FaCheck } from \"react-icons/fa\";\nimport \"./AddTodo.scss\";\nimport Header from \"../Header/Header\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUser } from \"../../store/user/action\";\nimport { addTodos, completeTodo, deleteAllTodos, deleteSingleTodo, editTodo, getAllTodos } from \"../../store/todo/action\";\nimport swal from \"sweetalert\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport useGAEventTracker from \"../../hooks/useGAEventsTracker\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction AddTodo() {\n  _s();\n\n  var _allTodos$filter, _allTodos$filter2;\n\n  const [id, setId] = useState(\"\");\n  const [todo, setTodo] = useState(\"\");\n  const [isAddClick, setIsAddClick] = useState(false);\n  const [isEditClick, setIsEditClick] = useState(false);\n  const GAEventTracker = useGAEventTracker(\"Editing\");\n  const plusRef = useRef();\n  const {\n    user\n  } = useSelector(state => state.userReducer);\n  const {\n    allTodos\n  } = useSelector(state => state.todoReducer);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getUser());\n  }, [dispatch]);\n  useEffect(() => {\n    dispatch(getAllTodos());\n  }, [isAddClick, dispatch]);\n\n  const handleAddTodo = async () => {\n    dispatch(addTodos({\n      todo\n    }, GAEventTracker));\n    setIsAddClick(!isAddClick);\n    setTodo(\"\");\n  };\n\n  const handleDeleteTodo = async id => {\n    swal({\n      title: \"Are you sure?\",\n      text: \"Once deleted, you will not be able to recover this todo!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        dispatch(deleteSingleTodo(id, GAEventTracker));\n        setIsAddClick(!isAddClick);\n      }\n    });\n  };\n\n  const handleEditTodo = async () => {\n    const body = {\n      todo,\n      id\n    };\n    dispatch(editTodo(body));\n    setTodo(\"\");\n    setIsAddClick(!isAddClick);\n    setIsEditClick(false);\n  };\n\n  const handleEditClick = (toDo, id) => {\n    setTodo(toDo);\n    setId(id);\n    setIsEditClick(true);\n  };\n\n  const handleDeleteAllTodos = async () => {\n    swal({\n      title: \"Are you sure?\",\n      text: \"Once deleted, you will not be able to recover your todos!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        dispatch(deleteAllTodos());\n        setIsAddClick(!isAddClick);\n      }\n    });\n  };\n\n  const handleCompleteClick = id => {\n    dispatch(completeTodo({\n      id\n    }));\n    setIsAddClick(!isAddClick);\n  };\n\n  const handleKeyPress = e => {\n    if (todo.length > 0) {\n      if (e.key === \"Enter\") {\n        plusRef.current.click();\n      }\n    } else {\n      setIsEditClick(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [user === null || user === void 0 ? void 0 : user.username, \"'s todo list\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputField\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: todo,\n          placeholder: \"Add your new todo\",\n          onChange: e => setTodo(e.target.value),\n          onKeyPress: handleKeyPress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: isEditClick ? handleEditTodo : handleAddTodo,\n          disabled: todo.length > 0 ? false : true,\n          ref: plusRef,\n          children: /*#__PURE__*/_jsxDEV(FaPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"todoList\",\n        children: allTodos === null || allTodos === void 0 ? void 0 : allTodos.map((obj, idx) => {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [(obj === null || obj === void 0 ? void 0 : obj.isCompleted) ? /*#__PURE__*/_jsxDEV(\"del\", {\n              children: obj.todo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 37\n            }, this) : obj.todo, !(obj === null || obj === void 0 ? void 0 : obj.isCompleted) && /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Complete\",\n              placement: \"top\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"completed\",\n                onClick: () => handleCompleteClick(obj._id),\n                children: /*#__PURE__*/_jsxDEV(FaCheck, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 19\n            }, this), !(obj === null || obj === void 0 ? void 0 : obj.isCompleted) && /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Update\",\n              placement: \"top\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"update\",\n                onClick: () => handleEditClick(obj.todo, obj._id),\n                children: /*#__PURE__*/_jsxDEV(FaPen, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Delete\",\n              placement: \"top\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"delete\",\n                onClick: () => handleDeleteTodo(obj._id),\n                children: /*#__PURE__*/_jsxDEV(FaTrashAlt, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"You have\", \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: (_allTodos$filter = allTodos.filter(obj => !(obj === null || obj === void 0 ? void 0 : obj.isCompleted))) === null || _allTodos$filter === void 0 ? void 0 : _allTodos$filter.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), \" pending\", \" \", ((_allTodos$filter2 = allTodos.filter(obj => !(obj === null || obj === void 0 ? void 0 : obj.isCompleted))) === null || _allTodos$filter2 === void 0 ? void 0 : _allTodos$filter2.length) > 1 ? \"tasks\" : \"task\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDeleteAllTodos,\n          disabled: !((allTodos === null || allTodos === void 0 ? void 0 : allTodos.length) > 0),\n          children: \"Clear All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(AddTodo, \"oHaFZO8E/arZ3psQjSj3dUYPOqI=\", false, function () {\n  return [useGAEventTracker, useSelector, useSelector, useDispatch];\n});\n\n_c = AddTodo;\nexport default AddTodo;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddTodo\");","map":{"version":3,"sources":["/home/hp/Desktop/todo-app-crud/todo-fe/src/components/AddTodo/AddTodo.jsx"],"names":["React","useEffect","useState","useRef","FaPlus","FaPen","FaTrashAlt","FaCheck","Header","useDispatch","useSelector","getUser","addTodos","completeTodo","deleteAllTodos","deleteSingleTodo","editTodo","getAllTodos","swal","Tooltip","useGAEventTracker","AddTodo","id","setId","todo","setTodo","isAddClick","setIsAddClick","isEditClick","setIsEditClick","GAEventTracker","plusRef","user","state","userReducer","allTodos","todoReducer","dispatch","handleAddTodo","handleDeleteTodo","title","text","icon","buttons","dangerMode","then","willDelete","handleEditTodo","body","handleEditClick","toDo","handleDeleteAllTodos","handleCompleteClick","handleKeyPress","e","length","key","current","click","username","target","value","map","obj","idx","isCompleted","_id","filter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { FaPlus, FaPen, FaTrashAlt, FaCheck } from \"react-icons/fa\";\nimport \"./AddTodo.scss\";\nimport Header from \"../Header/Header\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUser } from \"../../store/user/action\";\nimport {\n  addTodos,\n  completeTodo,\n  deleteAllTodos,\n  deleteSingleTodo,\n  editTodo,\n  getAllTodos,\n} from \"../../store/todo/action\";\nimport swal from \"sweetalert\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport useGAEventTracker from \"../../hooks/useGAEventsTracker\";\n\nfunction AddTodo() {\n  const [id, setId] = useState(\"\");\n  const [todo, setTodo] = useState(\"\");\n  const [isAddClick, setIsAddClick] = useState(false);\n  const [isEditClick, setIsEditClick] = useState(false);\n\n  const GAEventTracker = useGAEventTracker(\"Editing\");\n\n  const plusRef = useRef();\n\n  const { user } = useSelector((state) => state.userReducer);\n  const { allTodos } = useSelector((state) => state.todoReducer);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getUser());\n  }, [dispatch]);\n\n  useEffect(() => {\n    dispatch(getAllTodos());\n  }, [isAddClick, dispatch]);\n\n  const handleAddTodo = async () => {\n    dispatch(addTodos({ todo }, GAEventTracker));\n    setIsAddClick(!isAddClick);\n    setTodo(\"\");\n  };\n\n  const handleDeleteTodo = async (id) => {\n    swal({\n      title: \"Are you sure?\",\n      text: \"Once deleted, you will not be able to recover this todo!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true,\n    }).then((willDelete) => {\n      if (willDelete) {\n        dispatch(deleteSingleTodo(id, GAEventTracker));\n        setIsAddClick(!isAddClick);\n      }\n    });\n  };\n\n  const handleEditTodo = async () => {\n    const body = {\n      todo,\n      id,\n    };\n    dispatch(editTodo(body));\n    setTodo(\"\");\n    setIsAddClick(!isAddClick);\n    setIsEditClick(false);\n  };\n\n  const handleEditClick = (toDo, id) => {\n    setTodo(toDo);\n    setId(id);\n    setIsEditClick(true);\n  };\n\n  const handleDeleteAllTodos = async () => {\n    swal({\n      title: \"Are you sure?\",\n      text: \"Once deleted, you will not be able to recover your todos!\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true,\n    }).then((willDelete) => {\n      if (willDelete) {\n        dispatch(deleteAllTodos());\n        setIsAddClick(!isAddClick);\n      }\n    });\n  };\n\n  const handleCompleteClick = (id) => {\n    dispatch(completeTodo({ id }));\n    setIsAddClick(!isAddClick);\n  };\n\n  const handleKeyPress = (e) => {\n    if (todo.length > 0) {\n      if (e.key === \"Enter\") {\n        plusRef.current.click();\n      }\n    } else {\n      setIsEditClick(false);\n    }\n  };\n\n  return (\n    <>\n      <Header />\n      <div className=\"wrapper\">\n        <header>\n          <span>{user?.username}'s todo list</span>\n        </header>\n        <div className=\"inputField\">\n          <input\n            type=\"text\"\n            value={todo}\n            placeholder=\"Add your new todo\"\n            onChange={(e) => setTodo(e.target.value)}\n            onKeyPress={handleKeyPress}\n          />\n\n          <button\n            onClick={isEditClick ? handleEditTodo : handleAddTodo}\n            disabled={todo.length > 0 ? false : true}\n            ref={plusRef}\n          >\n            <FaPlus />\n          </button>\n        </div>\n        <ul className=\"todoList\">\n          {allTodos?.map((obj, idx) => {\n            return (\n              <li key={idx}>\n                {obj?.isCompleted ? <del>{obj.todo}</del> : obj.todo}\n                {!obj?.isCompleted && (\n                  <Tooltip title=\"Complete\" placement=\"top\">\n                    <span\n                      className=\"completed\"\n                      onClick={() => handleCompleteClick(obj._id)}\n                    >\n                      <FaCheck />\n                    </span>\n                  </Tooltip>\n                )}\n\n                {!obj?.isCompleted && (\n                  <Tooltip title=\"Update\" placement=\"top\">\n                    <span\n                      className=\"update\"\n                      onClick={() => handleEditClick(obj.todo, obj._id)}\n                    >\n                      <FaPen />\n                    </span>\n                  </Tooltip>\n                )}\n\n                <Tooltip title=\"Delete\" placement=\"top\">\n                  <span\n                    className=\"delete\"\n                    onClick={() => handleDeleteTodo(obj._id)}\n                  >\n                    <FaTrashAlt />\n                  </span>\n                </Tooltip>\n              </li>\n            );\n          })}\n        </ul>\n        <div className=\"footer\">\n          <span>\n            You have{\" \"}\n            <b>{allTodos.filter((obj) => !obj?.isCompleted)?.length}</b> pending{\" \"}\n            {allTodos.filter((obj) => !obj?.isCompleted)?.length > 1\n              ? \"tasks\"\n              : \"task\"}\n          </span>\n          <button\n            onClick={handleDeleteAllTodos}\n            disabled={!(allTodos?.length > 0)}\n          >\n            Clear All\n          </button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default AddTodo;\n"]},"metadata":{},"sourceType":"module"}